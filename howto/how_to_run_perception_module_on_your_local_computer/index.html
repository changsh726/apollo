<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>How to Run Perception Module on Your Local Computer - Apollo Docs</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Apollo Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../quick_start.md" class="nav-link">Get Started</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Cyber RT <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../cyber/" class="dropdown-item">Introduction to Cyber RT</a>
</li>
                                    
<li>
    <a href="../../cyber/cyber_rt_quick_start.md" class="dropdown-item">Cyber RT Quick Start</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../FAQs/" class="nav-link">FAQs</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/ApolloAuto/apollo/edit/master/docs/howto/how_to_run_perception_module_on_your_local_computer.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#how-to-run-perception-module-on-your-local-computer" class="nav-link">How to Run Perception Module on Your Local Computer</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="how-to-run-perception-module-on-your-local-computer">How to Run Perception Module on Your Local Computer</h1>
<p>The perception module requires Nvidia GPU and CUDA installed to run the perception algorithms with Caffe. We have already installed the CUDA and Caffe libraries in the released docker. However, the Nvidia GPU driver is not installed in the released dev docker image. To run the perception module with CUDA acceleration, we suggest to install the exactly same version of Nvidia driver in the docker as the one installed in your host machine, and build Apollo with GPU option.</p>
<p>We provide a step-by-step instruction on running perception module with Nvidia GPU as below:
1. Get into the docker container via: 
    <code>bash
    $APOLLO_HOME/docker/scripts/dev_start.sh
    $APOLLO_HOME/docker/scripts/dev_into.sh</code>
2. Build Apollo
    <code>bash
    ./apollo.sh build_opt_gpu</code>
3. Run bootstrap.sh
    <code>bash
    bootstrap.sh</code>
4. Launch Dreamview from your web browser by typing following address
http://localhost:8888/</p>
<ol>
<li>
<p>Select your car and map using the dropdowm options in the top right corner in Dreamview</p>
</li>
<li>
<p>Select the transform button in Dreamview or type the following command in your terminal
    <code>bash
    cyber_launch start /apollo/modules/transform/launch/static_transform.launch</code></p>
</li>
<li>
<p>If the image is compressed, launch the image decompression module
    <code>cyber_launch start modules/drivers/tools/image_decompress/launch/image_decompress.launch</code></p>
</li>
<li>
<p>Launch the perception modules</p>
<ul>
<li>
<p>If you want to launch all modules 
<code>cyber_launch start /apollo/modules/perception/production/launch/perception_all.launch</code></p>
</li>
<li>
<p>If you want to test camera-based obstacle and lane detection
<code>cyber_launch start /apollo/modules/perception/production/launch/perception_camera.launch</code></p>
</li>
</ul>
<p>If you want to visualize camera-based results overlaid on the captured image and in bird view, mark <code>enable_visualization: true</code> in <code>‘modules/perception/production/conf/perception/camera/fusion_camera_detection_component.pb.txt</code> befor executing the above command. It will pop up when you play recorded data in point 9
Also, If you want to enable CIPO, add ‘enable_cipv: true’ as a new line in the same file</p>
<ul>
<li>
<p>If you want to test lane detection alone use
<code>mainboard -d ./modules/perception/production/dag/dag_streaming_perception_lane.dag</code>
If you want to visualize lane results overlaid on the captured image and in bird view, mark <code>enable_visualization: true</code> in <code>modules/perception/production/conf/perception/camera/lane_detection_component.config</code> before executing the above command. It will pop up when you play recorded data in point 9</p>
</li>
<li>
<p>If you want to test traffic light detection module alone use
<code>cyber_launch start /apollo/modules/perception/production/launch/perception_trafficlight.launch</code>
If you want to visualize the traffic light detection results overlaid on the captured image, mark <code>—start_visualizer=true</code> in <code>apollo/modules/perception/production/conf/perception/perception_common.flag</code> before executing the above command. It will pop up when you play recorded data in point 9</p>
</li>
</ul>
</li>
<li>
<p>Play your recorded bag
    <code>cyber_recorder play -f /apollo/data/bag/anybag -r 0.2</code></p>
</li>
</ol>
<p>Please note that the Nvidia driver should be installed appropriately even if the perception module is running in Caffe CPU_ONLY mode (i.e., using <code>./apollo.sh build</code> or <code>./apollo.sh build_opt</code> to build the perception module). Please see the detailed instruction of perception module in <a href="https://github.com/ApolloAuto/apollo/blob/master/modules/perception/README.md">the perception README</a>.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
