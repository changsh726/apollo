<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Apollo Cyber RT FAQs - Apollo Docs</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Apollo Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../quick_start.md" class="nav-link">Get Started</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Cyber RT <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../" class="dropdown-item">Introduction to Cyber RT</a>
</li>
                                    
<li>
    <a href="../cyber_rt_quick_start.md" class="dropdown-item">Cyber RT Quick Start</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../FAQs/" class="nav-link">FAQs</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/ApolloAuto/apollo/edit/master/docs/cyber/CyberRT_FAQs.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#apollo-cyber-rt-faqs" class="nav-link">Apollo Cyber RT FAQs</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#what-is-apollo-cyber-rt" class="nav-link">What is Apollo Cyber RT?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#why-did-we-decide-to-work-on-a-new-runtime-framework" class="nav-link">Why did we decide to work on a new runtime framework?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#what-are-the-advantages-of-the-new-runtime-framework" class="nav-link">What are the advantages of the new runtime framework?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#can-we-still-use-the-data-that-we-have-collected" class="nav-link">Can we still use the data that we have collected?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#will-you-continue-to-support-ros" class="nav-link">Will you continue to support ROS?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#will-apollo-cyber-rt-affect-regular-code-development" class="nav-link">Will Apollo Cyber RT affect regular code development?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#recommended-setup-for-apollo-cyber-rt" class="nav-link">Recommended setup for Apollo Cyber RT</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#how-to-enable-shm-to-decrease-the-latency" class="nav-link">How to enable SHM to decrease the latency?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#how-to-use-the-no-serialization-message" class="nav-link">How to use the no serialization message?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#how-to-configure-multiple-hosts-communication" class="nav-link">How to configure multiple hosts communication?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="apollo-cyber-rt-faqs">Apollo Cyber RT FAQs</h1>
<h2 id="what-is-apollo-cyber-rt">What is Apollo Cyber RT?</h2>
<p>Apollo's Cyber RT is an open source runtime framework designed specifically for autonomous driving scenarios. Based on a centralized computing model, it is highly optimized for performance, latency, and data throughput</p>
<hr />
<h2 id="why-did-we-decide-to-work-on-a-new-runtime-framework">Why did we decide to work on a new runtime framework?</h2>
<ul>
<li>
<p>During years of development of autonomous driving technologies, we have learned a lot from our previous experience with Apollo. In autonomous driving scenarious, we need an effective centralized computing model, with demands for high performance,  including high concurrency, low latency and high throughput。</p>
</li>
<li>
<p>The industry is evolving, so does Apollo. Going forward, Apollo has already moved from development to productization, with volume deployments in the real world, we see the demands for the highest robustness and high performance. That’s why we spent years of building Apollo Cyber RT, which addresses that requirements of autonomous driving solutions.</p>
</li>
</ul>
<hr />
<h2 id="what-are-the-advantages-of-the-new-runtime-framework">What are the advantages of the new runtime framework?</h2>
<ul>
<li>Accelerate development</li>
<li>Well defined task interface with data fusion</li>
<li>Array of development tools</li>
<li>Large set of sensor drivers</li>
<li>Simplify deployment</li>
<li>Efficient and adaptive message communication</li>
<li>Configurable user level scheduler with resource awareness</li>
<li>Portable with fewer dependencies</li>
<li>Empower your own autonomous vehicles</li>
<li>The default open source runtime framework</li>
<li>Building blocks specifically designed for autonomous driving</li>
<li>Plug and play your own AD system</li>
</ul>
<hr />
<h2 id="can-we-still-use-the-data-that-we-have-collected">Can we still use the data that we have collected?</h2>
<ul>
<li>If the data you have collected is compatible with the previous versions of Apollo, you could use our recommended conversion tools to make the data compliant with our new runtime framework</li>
<li>If you created a customized data format, then the previously generated data will not be supported by the new runtime framework</li>
</ul>
<hr />
<h2 id="will-you-continue-to-support-ros">Will you continue to support ROS?</h2>
<p>We will continue to support previous Apollo releases (3.0 and before) based on ROS. We do appreciate you continue growing with us and highly encourage you to move to Apollo 3.5. While we know that some of our developers would prefer to work on ROS, we do hope you will understand why Apollo as a team cannot continue to support ROS in our future releases as we strive to work towards developing a more holistic platform that meets automotive standards.</p>
<hr />
<h2 id="will-apollo-cyber-rt-affect-regular-code-development">Will Apollo Cyber RT affect regular code development?</h2>
<p>If you have not modified anything at runtime framework layer and have only worked on Apollo's module code base, you will not be affected by the introduction of our new runtime framework as most of time you would only need to re-interface the access of the input and output data. Additional documents are under <a href="https://github.com/ApolloAuto/apollo/tree/master/docs/cyber/">cyber</a> with more details.</p>
<hr />
<h2 id="recommended-setup-for-apollo-cyber-rt">Recommended setup for Apollo Cyber RT</h2>
<ul>
<li>Currently the runtime framework only supports running on Trusty (Ubuntu 14.04)</li>
<li>The runtime framework also uses apollo's docker environment</li>
<li>It is recommended to run source setup.bash when opening a new terminal</li>
<li>Fork and clone the Apollo repo with the new framework code which can be found at <a href="https://github.com/ApolloAuto/apollo/tree/master/cyber/">apollo/cyber</a></li>
</ul>
<h2 id="how-to-enable-shm-to-decrease-the-latency">How to enable SHM to decrease the latency?</h2>
<p>To decrease number of threads, the readable notification mechanism of shared memory was changed in CyberRT. The default mechanism is UDP multicast, and system call(sendto) will cause some latency.</p>
<p>So, to decrease the latency, you can change the mechanism, The steps are listed as following:
1. update the CyberRT to the latest version;
2. uncomment the transport_conf in https://github.com/ApolloAuto/apollo/blob/master/cyber/conf/cyber.pb.conf;
3. change <strong>notifier_type</strong> of <strong>shm_conf</strong> from "multicast" to "condition";
4. build CyberRT with opt like <code>bazel build -c opt --copt=-fpic //cyber/...</code>;
5. run talker and listener;</p>
<p>Note:You can select the corresponding transmission method according to the relationship between nodes.For example, the default configuration is <strong>INTRA</strong> in the process, <strong>SHM</strong> between the host process, and <strong>RTPS</strong> across the host.
Of course you can change all three to RTPS. Or change <code>same_proc</code> and <code>diff_proc</code> to <strong>SHM</strong>;</p>
<h2 id="how-to-use-the-no-serialization-message">How to use the no serialization message?</h2>
<p>The message types supported by Cyber RT include both serializable structured data like protobuf and raw sequence of bytes.
You can refer the sample code:
- apollo::cyber::message::RawMessage
- talker: https://github.com/gruminions/apollo/blob/record/cyber/examples/talker.cc
- listener: https://github.com/gruminions/apollo/blob/record/cyber/examples/listener.cc</p>
<h2 id="how-to-configure-multiple-hosts-communication">How to configure multiple hosts communication?</h2>
<p>Make sure the two hosts(or more) are under the same network segment of the local area network, Like <code>192.168.10.6</code> and <code>192.168.10.7</code>.</p>
<p>You just need to modify <code>CYBER_IP</code> of <code>/apollo/cyber/setup.bash</code></p>
<pre><code class="bash">export CYBER_IP=127.0.0.1
</code></pre>

<p>Suppose you have two hosts A and B，the ip of A is <code>192.168.10.6</code>, and the ip of B is <code>192.168.10.7</code>. Then set <code>CYBER_IP</code> to <code>192.168.10.6</code> on host A, and set <code>CYBER_IP</code> to <code>192.168.10.7</code> on host B. Now host A can communicate with host B.</p>
<hr />
<p>More FAQs to follow...</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
